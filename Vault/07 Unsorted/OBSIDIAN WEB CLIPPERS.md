---
created: 2024-05-15T00:42:49 (UTC -05:00)
tags:
  - Obsidian
  - pkm
  - WEBCLIPPER
  - tools
  - links
  - VISUALBOOKMARKS
  - EXTENTION
source: https://forum.obsidian.md/t/configuring-the-web-clipper-markdownload-for-a-seamless-workflow-with-obsidian/62441
author:
  - VARIOUS
banner: https://forum.obsidian.md/uploads/default/original/3X/e/5/e5cee4f899883022e48b8b71843a4c543ecd23aa.svg
cssclasses:
  - dashboard
  - daily
  - friday
feature: "![[03 - MEDIA & FILES/BANNERS/autocardlink/e1243c1243ed74cc7f9615599f65ad74.png]]"
---

```cardlink
url: https://gist.github.com/kepano/90c05f162c37cf730abb8ff027987ca3
title: "Obsidian Web Clipper Bookmarklet to save articles and pages from the web (for Safari, Chrome, Firefox, and mobile browsers)"
description: "Obsidian Web Clipper Bookmarklet to save articles and pages from the web (for Safari, Chrome, Firefox, and mobile browsers) - obsidian-web-clipper.js"
host: gist.github.com
favicon: https://github.githubassets.com/favicons/favicon.svg
image: https://github.githubassets.com/assets/gist-og-image-54fd7dc0713e.png
```


```cardlink
url: https://chromewebstore.google.com/detail/markclipper-obsidian-web/mcbhalpamcihagflkpllacdcfmmnjemn
title: "markClipper - obsidian web clipper"
description: "markClipper insert clipped web contents directly into obsidian local vault. No config required. Highlighter. Open source"
host: chromewebstore.google.com
favicon: https://ssl.gstatic.com/chrome/webstore/images/icon_48px.png
image: https://lh3.googleusercontent.com/lKsQFY5X8lReqeJCc89AUKX9aG9akCiAWhlof3w7snVc57yPVKf1dUu4-K1nKsJFoVIfKy5pIs5iFuFNBc-45e0Yug=s128-rj-sc0x00ffffff
```


```cardlink
url: https://medium.com/@gareth.stretton/obsidian-create-your-own-web-clipper-add83c7662d0
title: "Obsidian: Create your own Web Clipper"
description: "This article shares how to create your own Obsidian web clipper. It will allow you to send web content of your choosing to your Obsidianâ€¦"
host: medium.com
favicon: https://miro.medium.com/v2/1*m-R_BkNf1Qjr1YbyOIJY2w.png
image: https://miro.medium.com/v2/da:true/resize:fit:1200/1*yvtKLDZaZcV_zRTTNcW32A.gif
```


```cardlink
url: https://chromewebstore.google.com/detail/markdownload-markdown-web/pcmpcfapbekmbjjkdalcgopdkipoggdi
title: "MarkDownload - Markdown Web Clipper"
description: "This extension works like a web clipper, but it downloads articles in markdown format."
host: chromewebstore.google.com
favicon: https://ssl.gstatic.com/chrome/webstore/images/icon_48px.png
image: https://lh3.googleusercontent.com/SMoew-lM5cX1E44bEyMtpoEWWmTo74hV83AQNvoey9NQwzt0BZu3WKYUkD7cafkDBcppBguq8_GzaCAvyymxbVxGrdk=s128-rj-sc0x00ffffff
```


```cardlink
url: https://chromewebstore.google.com/detail/obsidian-web-clipper/akiokmdijehkppdjnfdhdgcoeehpbfgd?hl=en
title: "Obsidian Web Clipper"
description: "A clipping extension to create notes in Obsidian."
host: chromewebstore.google.com
favicon: https://ssl.gstatic.com/chrome/webstore/images/icon_48px.png
image: https://lh3.googleusercontent.com/wcI_X45Yo4dOPlfpPgK3272hUjVGRcGR462W6d13-WrxX_nhTFhIF64H5ife8Cl0R70BSFm6-ybOoaGTyncIJ4oBRg=s128-rj-sc0x00ffffff
```


```cardlink
url: https://github.com/DominikPieper/obsidian-ReadItLater
title: "GitHub - DominikPieper/obsidian-ReadItLater"
description: "Contribute to DominikPieper/obsidian-ReadItLater development by creating an account on GitHub."
host: github.com
favicon: https://github.githubassets.com/favicons/favicon.svg
image: https://opengraph.githubassets.com/07fc159796ba6460a947d336cf44002624983785599767191280d9658262dc1b/DominikPieper/obsidian-ReadItLater
```


```cardlink
url: https://obsidian-clipper-maker.ganesshkumar.com/
title: "Obsidian Clipper"
description: "Make Obsidian Clipper or Bookmark"
host: obsidian-clipper-maker.ganesshkumar.com
favicon: https://obsidian-clipper-maker.ganesshkumar.com/images/favicon.png
```


```cardlink
url: https://github.com/alessandro-fazzi/downmark
title: "GitHub - alessandro-fazzi/downmark: A web service to transform web pages into markdown"
description: "A web service to transform web pages into markdown - alessandro-fazzi/downmark"
host: github.com
favicon: https://github.githubassets.com/favicons/favicon.svg
image: https://opengraph.githubassets.com/dabb1d7ab614f854efcc50264e2438af7123d237b3835198f41aa55918e8dc69/alessandro-fazzi/downmark
```


```cardlink
url: https://gist.github.com/kepano/90c05f162c37cf730abb8ff027987ca3?permalink_comment_id=3905251#gistcomment-3905251
title: "Obsidian Web Clipper Bookmarklet to save articles and pages from the web (for Safari, Chrome, Firefox, and mobile browsers)"
description: "Obsidian Web Clipper Bookmarklet to save articles and pages from the web (for Safari, Chrome, Firefox, and mobile browsers) - obsidian-web-clipper.js"
host: gist.github.com
favicon: https://github.githubassets.com/favicons/favicon.svg
image: https://github.githubassets.com/assets/gist-og-image-54fd7dc0713e.png
```





---


# Configuring the Web Clipper MarkDownload for a seamless workflow with Obsidian

  https://forum.obsidian.md/uploads/default/original/3X/b/a/ba1a1301f580d34a881803aa5ed8cf7ff3cdf0ef.png
> ## Excerpt
> Notes  The information and setup explained here was collected from the forum and GitHub issues, thanks everyone.  I only tested this hack on Linux / Firefox. Please post below your experience with other OS / browsers. Thank you.   The extension MarkDownload is a non Obsidian specific extension to save web clippings on your file system in Markdown format. Obsidian integration has been added to the extension to save web clippings to a preset folder in an Obsidian vault.  This is a great extension...

---
> Notes
> 
> The information and setup explained here was collected from the forum and GitHub issues, thanks everyone.
> 
> I only tested this hack on Linux / Firefox. Please post below your experience with other OS / browsers. Thank you.



## [](https://forum.obsidian.md/t/configuring-the-web-clipper-markdownload-for-a-seamless-workflow-with-obsidian/62441#the-extension-1)The extension

MarkDownload is a non Obsidian specific extension to save web clippings on your file system in Markdown format. Obsidian integration has been added to the extension to save web clippings to a preset folder in an Obsidian vault.

This is a great extension that works as advertised, and I appreciate the work that went into it. However, the Obsidian integration, even though it works, leaves a couple of things to be desired for a seamless workflow.

-   The extension integration does not save any images along with the web clippings, even tough the extension does so standalone. I often need to save the images with the page so Iâ€™d like to have the option
-   Even when using the extension without the Obsidian integration, it will only save the images if saving in the userâ€™s system download folder. If you try to save elsewhere, the images are not saved no matter what you do.
-   The Obsidian integration is hidden in the right-click context menu, something thatâ€™s not documented and ended up puzzling every new user I tried to onboard

## [](https://forum.obsidian.md/t/configuring-the-web-clipper-markdownload-for-a-seamless-workflow-with-obsidian/62441#the-aim-of-this-configuration-2)The Aim of this configuration

-   To be able to send a page **with images** to Obsidian with the a simple click on the extension toolbar icon using the symbolic link hack explained below
-   To be able to send a **text only** page to Obsidian with the right-click menu in the page or on the toolbar icon using the extension Obsidian integration which requires the install of the Obsidian Advanced URI extension
-   To quickly save web clippings, with or without images, in an Obsidian vault folder called `inbox` to later manage and organize the clippings from within Obsidian.
-   The saved clippings should be saved in a markdown file. The clipped images will be saved in a directory alongside the markdown file with the same name minus the `.md` extension. This will make it easy to edit/move/delete the markdown file along with its resources.

```css
obsidian_is_great_article.md < markdown file obsidian_is_great_article < folder containing the article images
```

## [](https://forum.obsidian.md/t/configuring-the-web-clipper-markdownload-for-a-seamless-workflow-with-obsidian/62441#how-to-3)How-to

Luckily, the setup is easy, it just requires a few steps.

### [](https://forum.obsidian.md/t/configuring-the-web-clipper-markdownload-for-a-seamless-workflow-with-obsidian/62441#in-obsidian-4)In Obsidian

-   Install the [Obsidian Advanced URI 161](https://vinzent03.github.io/obsidian-advanced-uri/) plugin
-   Create the `inbox` folder where clippings will be saved.

### [](https://forum.obsidian.md/t/configuring-the-web-clipper-markdownload-for-a-seamless-workflow-with-obsidian/62441#in-your-browser-5)In your browser

-   Install the [MarkDownload 182](https://github.com/deathau/markdownload). extension
-   In the browser extensionâ€™s preferences, set:
    -   Always show Save As dialog: OFF
    -   Download Images alongside markdown files: ON
    -   Enable Obsidian Integration: Specify your vault name and `inbox` as the obsidian folder - This will give you the the right-click option to save without images
    -   Set Folder inside Downloads/ to: `MarkDownload` - This is the only place where the extension seems to be able to save images
    -   Set Download images alongside markdown files: `{pageTitle}/` - This will save the images in a folder named with the page title just like the markdown file.

### [](https://forum.obsidian.md/t/configuring-the-web-clipper-markdownload-for-a-seamless-workflow-with-obsidian/62441#in-your-file-system-6)In your file system

If youâ€™re not familiar with the concept of Symbolic Links, this will take more time to explain than to do. Itâ€™s just one command though.

If we use this setup as is, we will save the clippings in the `MarkDownload` folder in your systemâ€™s download directory, not where we want them. Since we have to save in the Download directory for images to be saved, we will create a symbolic link from the `inbox` folder in your vault that targets the `MarkDownload` folder in your download folder.

Simply explained, this means that we instruct the operating system to regard both directories as one, but actually store the data in `inbox`. The `MarkDownloader` folder is just a symbolic link that points to `inbox` which is the real folder that will actually hold the files. The extension will think itâ€™s using the download folder and will happily save the images in it, and Obsidian will be happy since it will have all the clippings and images in its vault.

#### [](https://forum.obsidian.md/t/configuring-the-web-clipper-markdownload-for-a-seamless-workflow-with-obsidian/62441#on-most-operating-systems-7)On most operating systems

Most GUI file managers will let you create a symbolic link, so check your OS documentation or the articles I linked below. Just make sure that the symbolic link directory is the one in the download folder, and the real directory where the content will live is the one in your Obsidian vault.

#### [](https://forum.obsidian.md/t/configuring-the-web-clipper-markdownload-for-a-seamless-workflow-with-obsidian/62441#linux-and-mac-command-line-option-8)Linux and Mac command line option

Be sure to use the correct paths

```bash
ls -s /home/user/Obsidian/vault/inbox /home/user/Download/MarkDownload
```

**â€œHow-To Geekâ€ help guides:**

Windows: [The Complete Guide to Creating Symbolic Links on Windows 73](https://www.howtogeek.com/16226/complete-guide-to-symbolic-links-symlinks-on-windows-or-linux/)  
Mac: [How to Create and Use Symbolic Links on a Mac 50](https://www.howtogeek.com/297721/how-to-create-and-use-symbolic-links-aka-symlinks-on-a-mac/)  
Gnome on Linux: [How to Create and Use Symbolic Links on Linux 9](https://www.howtogeek.com/287014/how-to-create-and-use-symbolic-links-aka-symlinks-on-linux/)

> Question:
> 
> Can anybody find an article for KDE?

## [](https://forum.obsidian.md/t/configuring-the-web-clipper-markdownload-for-a-seamless-workflow-with-obsidian/62441#usage-9)Usage

### [](https://forum.obsidian.md/t/configuring-the-web-clipper-markdownload-for-a-seamless-workflow-with-obsidian/62441#to-save-with-images-10)To save with images

You can clip the whole page or a selection. Click the extension toolbar icon, review the Markdown that will be saved in the preview window, then click `Download`.

### [](https://forum.obsidian.md/t/configuring-the-web-clipper-markdownload-for-a-seamless-workflow-with-obsidian/62441#to-save-without-images-11)To save without images

Right-click on the extension toolbar icon or on the page, select:  
`MarkDownload - Markdown Web Clipper` > `Send Tab to Obsidian`

## [](https://forum.obsidian.md/t/configuring-the-web-clipper-markdownload-for-a-seamless-workflow-with-obsidian/62441#optional-customization-12)Optional customization

You can customize the text properties the extension puts in the YAML Front-matter as well as the body of the markdown files. This can be done in the Template section in the extension browser configuration.

-   I removed the `tags` properties since clipped web pages can have a inordinate number of tags that Obsidian will include in your vault tags. If you curate your tags this will drive you crazy ![[https://forum.obsidian.md/images/emoji/apple/slight_smile.png?v=12]]
-   The extension puts the `url` property in the Front-matter, I added it again in the body of the markdown file so it will be visible and I can click on it easily.
-   In use the filename as # (H1) in my vault so I removed the `{pagetitle}` from the body of the file to avoid duplication

Hereâ€™s the template I currently use:

```yaml
--- created: {date:YYYY-MM-DD - HH:mm} url: {baseURI} author: {byline} --- URL: {baseURI} > ## Excerpt > {excerpt} ---
```

Hope this helps,  
A.B.



#
---

# FORKS OF KEPANO'S WEB CLIPPER:

Simplified version that only saves the following: title, url, local timestamp (e.g., 2024-06-21T06:12:25)

```js
javascript:(function(){
    const now = new Date();
    const pad = (num) => String(num).padStart(2, '0');
    const formattedDate = `${now.getFullYear()}-${pad(now.getMonth() + 1)}-${pad(now.getDate())}T${pad(now.getHours())}:${pad(now.getMinutes())}:${pad(now.getSeconds())}`;

    const title = document.title;
    const url = document.URL;

    const folder = "00 - 09 System/04 Bookmarks/04.01 Obsidian Web Clipper/Raw Notes/";
    const fileName = `${title}`;

    const fileContent = 
        '---\n'
        + `url: ${url}\n`
        + `date: ${formattedDate}\n`
        + '---\n\n';

    document.location.href = "obsidian://new?"
        + "file=" + encodeURIComponent(folder + fileName)
        + "&content=" + encodeURIComponent(fileContent);
})();
```

> [!NOTE]
> Hi!
> 
> A small bug in the gist:
> 
> ```
>       fileName = fileName.replace(':', '').replace(/\//g, '-').replace(/\\/g, '-');
> ```
> 
> Here you only replace the first occurence ofÂ `:`, leaving the rest as a possible issue.
> 
> ```
>       fileName = fileName.replace(/:/g, '').replace(/\//g, '-').replace(/\\/g, '-');
> ```
> 
> Should fix that.


> [!NOTE]
> Thanks for sharing this, i had faced one problems with the script byÂ [@kepano](https://github.com/kepano)Â for generating markdown for long pages, it was
> silently failing and the way few characters clipped with the implementation ofÂ [@skelly-larry](https://github.com/skelly-larry)Â . I used implemetation 
> fromÂ [@kepano](https://github.com/kepano),Â [@jordanwiseman](https://github.com/jordanwiseman)Â andÂ [@skelly-larry](https://github.com/skelly-larry)Â as 
> input (thanks to all of them) and improved the script by removing character limitation for full page clipping with the aid of advanced uri plugin, 
> meaning Obsidian Advanced URI plugin must be installed and enabled. Also selected range of text and tagging work as good as other implementations. Tested
>  on Chrome and Firefox with no issue. Hope that helps to those who have not made the previous implementations work for them and those who have been 
>  looking for a full scale implementation.
> 
> ```js
> javascript: Promise.all([import('https://unpkg.com/turndown@6.0.0?module'), import('https://unpkg.com/@tehshrike/readability@0.2.0'),]).then(async ([{
>     default: Turndown
> }, {
>     default: Readability
> }]) => {
> 
>     /* Optional vault name */
>     const vault = "";
> 
>     /* Optional folder name such as "Clippings/" */
>     const folder = "";
> 
>     /* Optional tags  */
>     let tags = "clippings";
> 
>     /* parse and lightly clean the site's meta keywords content into tags, if present */
>     if (document.querySelector('meta[name="keywords" i]')) {
>         var keywords = document.querySelector('meta[name="keywords" i]').getAttribute('content').split(',');
> 
>         keywords.forEach(function (keyword) {
>             let tag = ' ' + keyword.split(' ').join('');
>             tags += tag;
>         });
>     }
> 
>     function getSelectionHtml() {
>         var html = "";
>         if (typeof window.getSelection != "undefined") {
>             var sel = window.getSelection();
>             if (sel.rangeCount) {
>                 var container = document.createElement("div");
>                 for (var i = 0, len = sel.rangeCount; i < len; ++i) {
>                     container.appendChild(sel.getRangeAt(i).cloneContents());
>                 }
>                 html = container.innerHTML;
>             }
>         } else if (typeof document.selection != "undefined") {
>             if (document.selection.type == "Text") {
>                 html = document.selection.createRange().htmlText;
>             }
>         }
>         return html;
>     }
> 
>     const selection = getSelectionHtml();
> 
>     const {
>         title,
>         byline,
>         content
>     } = new Readability(document.cloneNode(true)).parse();
> 
>     function getFileName(fileName) {
>         var userAgent = window.navigator.userAgent,
>             platform = window.navigator.platform,
>             windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'];
> 
>         if (windowsPlatforms.indexOf(platform) !== -1) {
>             fileName = fileName.replace(':', '').replace(/[/\\?%*|"<>]/g, '-');
>         } else {
>             fileName = fileName.replace(':', '').replace(/\//g, '-').replace(/\\/g, '-');
>         }
>         return fileName;
>     }
>     const fileName = getFileName(title);
> 
>     if (selection) {
>         var markdownify = selection;
>     } else {
>         var markdownify = content;
>     }
> 
>     if (vault) {
>         var vaultName = '&vault=' + encodeURIComponent(`${vault}`);
>     } else {
>         var vaultName = '';
>     }
> 
>     const markdownBody = new Turndown({
>         headingStyle: 'atx',
>         hr: '',
> bulletListMarker: '-',
>codeBlockStyle: 'fenced',
>emDelimiter: '',
>}).turndown(markdownify);
>
>var date = new Date();
>
>
>function convertDate(date) {
>var yyyy = date.getFullYear().toString();
>var mm = (date.getMonth() + 1).toString();
>var dd = date.getDate().toString();
>var mmChars = mm.split('');
>var ddChars = dd.split('');
>return yyyy + '-' + (mmChars1 ? mm : "0" + mmChars0) + '-' + (ddChars1 ? dd : "0" + ddChars0);
>}
>
>
>const today = convertDate(date);
>
>
>/ YAML front matter as tags render cleaner with special chars  /
>const fileContent =
>"---\n"
>+ "author:    " + byline + "\n"
>+ "title:     " + title + "\n"
>+ "source:    " + document.URL + "\n"
>+ "clip date: " + today + "\n"
>+ "published: \n\n"
>+ "tags:      " + tags + "\n"
>+ "---\n\n"
>+ markdownBody
>+ "\n\n---\n" + String(markdownBody.length) + " chars clipped from "
>+ "" + title + "" + document.URL + "\n";
>
>
>// This function must be called in a visible page, such as a browserAction popup
>// or a content script. Calling it in a background page has no effect!
>async function copyContent() {
>try {
>await navigator.clipboard.writeText(fileContent);
>} catch (err) {
>console.error('Failed to copy: ', err);
>}
>}
>
>
>copyContent();
>
>
>document.location.href = "obsidian://advanced-uri?"
>+ "vault=" + vaultName
>+ "&clipboard=true"
>+ "&mode=new"
>+ "&filepath=" + encodeURIComponent(folder + fileName);
> 
> })
> ```


> [!NOTE]
> On my Windows 10 with Google Chrome I had to add this to the registry and then it works.
> 
> Got the tip viaÂ [this thread](https://support.google.com/chrome/a/thread/3859524/how-to-register-chrome-protocol-handlers-automatically-e-g-gpo?hl=en)Â and used theÂ [Obsidian Clipper Maker](https://obsidian-clipper-maker.ganesshkumar.com/)
> 
> **obsidan-allow.reg**
> 
> ```
> Windows Registry Editor Version 5.00
> 
> [HKEY_CURRENT_USER\SOFTWARE\Policies\Google\Chrome]
> 
> [HKEY_CURRENT_USER\SOFTWARE\Policies\Google\Chrome\AutoOpenAllowedForURLs]
> "1"="obsidian://"
> ```
> 

> [!NOTE]
> > [@kepano](https://github.com/kepano), I have been using this and I have couple of bookmarklets to clip the contents into different folders in my vault.
> >  Since I created bookmarklets for various folders, I created a simple UI to fill in the vault name, folder name, tags and get the bookmarklet.
> > 
> > [http://obsidian-clipper-maker.ganesshkumar.com](http://obsidian-clipper-maker.ganesshkumar.com/)
> > 
> > Let me know if this is useful for you guys!


> [!NOTE]
> [@jordanwiseman](https://github.com/jordanwiseman): Works like a charm, thank you. ðŸ‘
> 
> Small improvement idea: Add a level one headline (`# The Headline`) at the beginning of the document.  
> E.g.:
> 
> ```
> var headline = title;
> const fileContent = ....... +
> '# ' + headline + 
> markdownBody;
> ```


> [!NOTE]
> @pioneerskiesÂ [@jordanwiseman](https://github.com/jordanwiseman)
> 
> Many things I want to clip are too long and it fails. I want to grab the leading part of a page and edit from there; or a selection.  
> I also want a navigable link to the page at the bottom of what I clip.
> 
> This refinement of Jordan's fits as much of the page as possible, assuming a safe URL length for most browsers is 2048; i trimmed it back to 2030 due to errors, which can URI encode 1200-1300 characters of source content. It also adds the link to source and a diagnostic of the number of characters of page content clipped.
> 
> I acknowledge that tags may be fractured and the last character of the page may be broken, if URI encoding it escapes it and I truncate in the middle. But it captures pages pretty well so far and there will always be some massaging on the Obsidian page.
> 
> Decrementing by 1 char each time seems a little wasteful, I used to use 100, but its just browser cycles and is instantaneous.
> 
> Still no CSP or CORS solution.
> 
> Code
> 
> ```js
> javascript: Promise.all([import('https://unpkg.com/turndown@6.0.0?module'), import('https://unpkg.com/@tehshrike/readability@0.2.0'), ]).then(async ([{
>     default: Turndown
> }, {
>     default: Readability
> }]) => {
> 
>   /* Optional vault name */
>   const vault = "";
> 
>   /* Optional folder name such as "Clippings/" */
>   const folder = "";
> 
>   /* Optional tags  */
>   let tags = "clippings";
> 
>   /* parse and lightly clean the site's meta keywords content into tags, if present */
>   if (document.querySelector('meta[name="keywords" i]')) {
>       var keywords = document.querySelector('meta[name="keywords" i]').getAttribute('content').split(',');
> 
>       keywords.forEach(function(keyword) {
>           let tag = ' ' + keyword.split(' ').join('');
>           tags += tag;
>       });
>   }
> 
>   function getSelectionHtml() {
>     var html = "";
>     if (typeof window.getSelection != "undefined") {
>         var sel = window.getSelection();
>         if (sel.rangeCount) {
>             var container = document.createElement("div");
>             for (var i = 0, len = sel.rangeCount; i < len; ++i) {
>                 container.appendChild(sel.getRangeAt(i).cloneContents());
>             }
>             html = container.innerHTML;
>         }
>     } else if (typeof document.selection != "undefined") {
>         if (document.selection.type == "Text") {
>             html = document.selection.createRange().htmlText;
>         }
>     }
>     return html;
>   }
> 
>   const selection = getSelectionHtml();
> 
>   const {
>       title,
>       byline,
>       content
>   } = new Readability(document.cloneNode(true)).parse();
> 
>   function getFileName(fileName) {
>     var userAgent = window.navigator.userAgent,
>         platform = window.navigator.platform,
>         windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'];
> 
>     if (windowsPlatforms.indexOf(platform) !== -1) {
>       fileName = fileName.replace(':', '').replace(/[/\\?%*|"<>]/g, '-');
>     } else {
>       fileName = fileName.replace(':', '').replace(/\//g, '-').replace(/\\/g, '-');
>     }
>     return fileName;
>   }
>   const fileName = getFileName(title);
> 
>   if (selection) {
>       var markdownify = selection;
>   } else {
>       var markdownify = content;
>   }
> 
>   if (vault) {
>       var vaultName = '&vault=' + encodeURIComponent(`${vault}`);
>   } else {
>       var vaultName = '';
>   }
> 
>   const markdownBody = new Turndown({
>       headingStyle: 'atx',
>       hr: '~~~',
>       bulletListMarker: '-',
>       codeBlockStyle: 'fenced',
>       emDelimiter: '*',
>   }).turndown(markdownify);
> 
>   var date = new Date();
> 
>   function convertDate(date) {
>     var yyyy = date.getFullYear().toString();
>     var mm = (date.getMonth()+1).toString();
>     var dd  = date.getDate().toString();
>     var mmChars = mm.split('');
>     var ddChars = dd.split('');
>     return yyyy + '-' + (mmChars[1]?mm:"0"+mmChars[0]) + '-' + (ddChars[1]?dd:"0"+ddChars[0]);
>   }
> 
>   const today = convertDate(date);
> 
>   /* YAML front matter as tags render cleaner with special chars  */
>   const fileContent = 
>       "---\n"
>       + "author:    " + byline + "\n"
>       + "title:     [" + title + "]\n"
>       + "source:    " + document.URL + "\n"
>       + "clipped:   " + today + "\n"
>       + "published: \n\n" 
>       + "tags:      [" + tags + "]\n"
>       + "---\n\n"
>       + markdownBody ;
>   
>   
>   /* add a link to the source at the end */
>   const linkref = 
>       "\n\n---\n\source: [" + title + "](" + document.URL + ")\n";
> 
>   /* assemble URL, decrementing each time, until it does not exceed the max URL length for this browser, supposedly 2048 but allow for a little error with 2030 */
>   contentLength = 2048;
>   maxURLLength = 2030;
>   decrement = 1;
> 
>   do {
> 	hrefString = "obsidian://new?"
>       + "file=" + encodeURIComponent(folder + fileName)
>       + "&content=" + encodeURIComponent(fileContent.substr(0,contentLength-1)) + encodeURIComponent(linkref) + "\n\nclipped " + String(contentLength) + " chars " 
>       + vaultName ;
> 	contentLength = contentLength - decrement;
>   } while (hrefString.length > maxURLLength);
> 
>   document.location.href = hrefString;
> 
> })
> ```

Hey,Â [@kepano](https://github.com/kepano), fantastic work! FYI, I forked aÂ [version](https://gist.github.com/jordanwiseman/fd5bfc910a78e32a8cca683378b3d9ba)Â and added auto-tagging based on a site'sÂ `<meta name="keywords" ....`Â tag, and using YAML front matter (a laÂ [@Moonbase59](https://github.com/Moonbase59)) as it seems to handle lessÂ ~~predictable~~Â alphanumeric-only tags better.

Code:

```js
javascript: Promise.all([import('https://unpkg.com/turndown@6.0.0?module'), import('https://unpkg.com/@tehshrike/readability@0.2.0'), ]).then(async ([{
    default: Turndown
}, {
    default: Readability
}]) => {

  /* Optional vault name */
  const vault = "";

  /* Optional folder name such as "Clippings/" */
  const folder = "";

  /* Optional tags  */
  let tags = "clippings";

  /* parse and lightly clean the site's meta keywords content into tags, if present */
  if (document.querySelector('meta[name="keywords" i]')) {
      var keywords = document.querySelector('meta[name="keywords" i]').getAttribute('content').split(',');

      keywords.forEach(function(keyword) {
          let tag = ' ' + keyword.split(' ').join('');
          tags += tag;
      });
  }

  function getSelectionHtml() {
    var html = "";
    if (typeof window.getSelection != "undefined") {
        var sel = window.getSelection();
        if (sel.rangeCount) {
            var container = document.createElement("div");
            for (var i = 0, len = sel.rangeCount; i < len; ++i) {
                container.appendChild(sel.getRangeAt(i).cloneContents());
            }
            html = container.innerHTML;
        }
    } else if (typeof document.selection != "undefined") {
        if (document.selection.type == "Text") {
            html = document.selection.createRange().htmlText;
        }
    }
    return html;
  }

  const selection = getSelectionHtml();

  const {
      title,
      byline,
      content
  } = new Readability(document.cloneNode(true)).parse();

  function getFileName(fileName) {
    var userAgent = window.navigator.userAgent,
        platform = window.navigator.platform,
        windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'];

    if (windowsPlatforms.indexOf(platform) !== -1) {
      fileName = fileName.replace(':', '').replace(/[/\\?%*|"<>]/g, '-');
    } else {
      fileName = fileName.replace(':', '').replace(/\//g, '-').replace(/\\/g, '-');
    }
    return fileName;
  }
  const fileName = getFileName(title);

  if (selection) {
      var markdownify = selection;
  } else {
      var markdownify = content;
  }

  if (vault) {
      var vaultName = '&vault=' + encodeURIComponent(`${vault}`);
  } else {
      var vaultName = '';
  }

  const markdownBody = new Turndown({
      headingStyle: 'atx',
      hr: '~~~',
      bulletListMarker: '-',
      codeBlockStyle: 'fenced',
      emDelimiter: '*',
  }).turndown(markdownify);

  var date = new Date();

  function convertDate(date) {
    var yyyy = date.getFullYear().toString();
    var mm = (date.getMonth()+1).toString();
    var dd  = date.getDate().toString();
    var mmChars = mm.split('');
    var ddChars = dd.split('');
    return yyyy + '-' + (mmChars[1]?mm:"0"+mmChars[0]) + '-' + (ddChars[1]?dd:"0"+ddChars[0]);
  }

  const today = convertDate(date);

  /* YAML front matter as tags render cleaner with special chars  */
  const fileContent = 
      "---\n"
      + "author:    " + byline + "\n"
      + "title:     [" + title + "]\n"
      + "source:    " + document.URL + "\n"
      + "clipped:   " + today + "\n"
      + "published: \n\n" 
      + "tags:      [" + tags + "]\n"
      + "---\n\n"
      + markdownBody ;
  
  document.location.href = "obsidian://new?"
    + "file=" + encodeURIComponent(folder + fileName)
    + "&content=" + encodeURIComponent(fileContent)
    + vaultName ;
})
```